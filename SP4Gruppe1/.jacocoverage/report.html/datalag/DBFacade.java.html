<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="da"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DBFacade.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;SP4Gruppe1&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">datalag</a> &gt; <span class="el_source">DBFacade.java</span></div><h1>DBFacade.java</h1><pre class="source lang-java linenums">package datalag;

import businesslogic.*;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Time;
import java.sql.Timestamp;
import java.time.LocalDate;
import java.time.LocalTime;
import static java.time.temporal.TemporalQueries.localDate;
import java.util.ArrayList;
import java.util.Date;

/*
 * @author Caroline, Nina, Rikke og Kristine
 */
public class DBFacade implements DBStorage{

    private Connection connection;

<span class="fc" id="L23">    public DBFacade(DBConnection dbc) {</span>
<span class="fc" id="L24">        connection = dbc.getConnection();</span>
<span class="fc" id="L25">    }</span>

    @Override
    public int getID() {
<span class="fc" id="L29">        int id = 1;</span>
        try {
            //create String for the PreparedStatement
<span class="fc" id="L32">            String selectSQL = &quot;SELECT LAST_INSERT_ID() FROM members&quot;;</span>
            //get connection
<span class="nc" id="L34">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L37">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L38" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L39">                id = result.getInt(1);</span>
            }
<span class="fc" id="L41">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L42">        }</span>
<span class="fc" id="L43">        return id;</span>
    }

    @Override
    public ArrayList&lt;Member&gt; getMembersList() {
<span class="fc" id="L48">        ArrayList&lt;Member&gt; members = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="fc" id="L51">            String selectSQL = &quot;SELECT * FROM members ORDER BY first_name&quot;;</span>
            //get connection
<span class="nc" id="L53">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L56">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L57" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L58">                String firstName = result.getString(1);</span>
<span class="nc" id="L59">                String lastName = result.getString(2);</span>
<span class="nc" id="L60">                int age = result.getInt(3);</span>
<span class="nc" id="L61">                boolean isActive = result.getBoolean(4);</span>
<span class="nc" id="L62">                int id = result.getInt(5);</span>
<span class="nc" id="L63">                int contingent = result.getInt(6);</span>
<span class="nc" id="L64">                int restance = result.getInt(7);</span>

                //create a new Member object and insert it into the ArrayList
<span class="nc" id="L67">                members.add(new Member(firstName, lastName, age, isActive, contingent, restance, id));</span>
<span class="nc" id="L68">            }</span>
<span class="fc" id="L69">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L70">        }</span>
<span class="fc" id="L71">        return members;</span>
    }

    @Override
    public void saveMember(Member member) {
        try {
            //create String for the PreparedStatement
<span class="fc" id="L78">            String insertSQL = &quot;INSERT INTO members &quot;</span>
                    + &quot;(first_name, last_name, age, is_active, &quot;
                    + &quot;contingent, restance) VALUES&quot;
                    + &quot;(?, ?, ?, ?, ?, ?)&quot;;

            //get connection
<span class="nc" id="L84">            PreparedStatement preparedStatement = connection.prepareStatement(insertSQL);</span>
            //insert correct values into the placeholders' (the ?) spaces
<span class="nc" id="L86">            preparedStatement.setString(1, member.getFirstName());</span>
<span class="nc" id="L87">            preparedStatement.setString(2, member.getLastName());</span>
<span class="nc" id="L88">            preparedStatement.setInt(3, member.getAge());</span>
<span class="nc" id="L89">            preparedStatement.setBoolean(4, member.isIsActive());</span>
<span class="nc" id="L90">            preparedStatement.setDouble(5, member.getContingent());</span>
<span class="nc" id="L91">            preparedStatement.setDouble(6, member.getRestance());</span>

            //execute the SQL query
<span class="nc" id="L94">            preparedStatement.executeUpdate();</span>
<span class="fc" id="L95">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L96">        }</span>
<span class="fc" id="L97">    }</span>

    @Override
    public void deleteMember(int id) {
        try {
<span class="fc" id="L102">            deleteFromCompetition(id);</span>
<span class="fc" id="L103">            deleteFromCompetitiveSwimmers(id);</span>
            //create String for the PreparedStatement
<span class="fc" id="L105">            String deleteSQL = &quot;DELETE FROM members WHERE id = ?&quot;;</span>
            //get connection
<span class="nc" id="L107">            PreparedStatement preparedStatement = connection.prepareStatement(deleteSQL);</span>
            //insert correct values into the placeholder's (the ?) space
<span class="nc" id="L109">            preparedStatement.setInt(1, id);</span>

            //execute the SQL query
<span class="nc" id="L112">            preparedStatement.executeUpdate();</span>
<span class="fc" id="L113">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L114">        }</span>
<span class="fc" id="L115">    }</span>

    private void deleteFromCompetition(int id) {
        try {
            //create String for the PreparedStatement
<span class="fc" id="L120">            String deleteSQL = &quot;DELETE FROM competitions WHERE id = ?&quot;;</span>
            //get connection
<span class="nc" id="L122">            PreparedStatement preparedStatement = connection.prepareStatement(deleteSQL);</span>
            //insert correct values into the placeholder's (the ?) space
<span class="nc" id="L124">            preparedStatement.setInt(1, id);</span>

            //execute the SQL query
<span class="nc" id="L127">            preparedStatement.executeUpdate();</span>
<span class="fc" id="L128">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L129">        }</span>
<span class="fc" id="L130">    }</span>

    private void deleteFromCompetitiveSwimmers(int id) {
        try {
            //create String for the PreparedStatement
<span class="fc" id="L135">            String deleteSQL = &quot;DELETE FROM competitive_swimmers WHERE id = ?&quot;;</span>
            //get connection
<span class="nc" id="L137">            PreparedStatement preparedStatement = connection.prepareStatement(deleteSQL);</span>
            //insert correct values into the placeholder's (the ?) space
<span class="nc" id="L139">            preparedStatement.setInt(1, id);</span>

            //execute the SQL query
<span class="nc" id="L142">            preparedStatement.executeUpdate();</span>
<span class="fc" id="L143">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L144">        }</span>
<span class="fc" id="L145">    }</span>

    @Override
    public void saveCompetitiveSwimmer(CompetitiveSwimmer member) {
        try {
<span class="nc" id="L150">            saveMember(member);</span>
            //create String for the PreparedStatement
<span class="nc" id="L152">            String insertSQL = &quot;INSERT INTO competitive_swimmer &quot;</span>
                    + &quot;VALUES (?, ?, ?, ?)&quot;;

            //get connection
<span class="nc" id="L156">            PreparedStatement preparedStatement = connection.prepareStatement(insertSQL);</span>
            //insert correct values into the placeholders' (the ?) spaces
<span class="nc" id="L158">            preparedStatement.setInt(1, member.getId());</span>
<span class="nc" id="L159">            preparedStatement.setString(2, member.getDisciplin());</span>
<span class="nc" id="L160">            preparedStatement.setObject(3, member.getBestTime());</span>
<span class="nc" id="L161">            preparedStatement.setObject(4, member.getDateOfBestTime());</span>
            //execute the SQL query
<span class="nc" id="L163">            preparedStatement.executeUpdate();</span>
<span class="nc" id="L164">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L165">        }</span>
<span class="nc" id="L166">    }</span>

    @Override
    public ArrayList&lt;CompetitiveSwimmer&gt; getTop5() {
<span class="nc" id="L170">        ArrayList&lt;CompetitiveSwimmer&gt; top5 = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="nc" id="L173">            String selectSQL = &quot;SELECT id, first_name, last_name, age, disciplin, &quot;</span>
                    + &quot;best_time, date_of_best_time FROM members&quot;
                    + &quot;NATURAL JOIN competitive_swimmers ORDER BY best_time&quot;
                    + &quot;LIMIT 5&quot;;
            //get connection
<span class="nc" id="L178">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L181">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L182" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L183">                int id = result.getInt(1);</span>
<span class="nc" id="L184">                String firstName = result.getString(2);</span>
<span class="nc" id="L185">                String lastName = result.getString(3);</span>
<span class="nc" id="L186">                int age = result.getInt(4);</span>
<span class="nc" id="L187">                String disciplin = result.getString(5);</span>
<span class="nc" id="L188">                Time bestTime = result.getTime(6);</span>
<span class="nc" id="L189">                Date dateOfBestTime = result.getDate(7);</span>

                //create a new Member object and insert it into the ArrayList
//                top5.add(new CompetitiveSwimmer(firstName, lastName, age, id, disciplin,
//                        bestTime, dateOfBestTime));
<span class="nc" id="L194">            }</span>
<span class="nc" id="L195">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L196">        }</span>
<span class="nc" id="L197">        return top5;</span>
    }

    @Override
    public ArrayList&lt;Contingent&gt; getContingentList() {
<span class="nc" id="L202">        ArrayList&lt;Contingent&gt; contingent = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="nc" id="L205">            String selectSQL = &quot;SELECT * FROM contingent&quot;;</span>
            //get connection
<span class="nc" id="L207">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L210">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L212">                int under18 = result.getInt(1);</span>
<span class="nc" id="L213">                int between18And60 = result.getInt(2);</span>
<span class="nc" id="L214">                int over60 = result.getInt(3);</span>
<span class="nc" id="L215">                int passive = result.getInt(4);</span>

                //create a new Member object and insert it into the ArrayList
<span class="nc" id="L218">                contingent.add(new Contingent(under18, between18And60, over60, passive));</span>
<span class="nc" id="L219">            }</span>
<span class="nc" id="L220">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L221">        }</span>
<span class="nc" id="L222">        return contingent;</span>
    }

    @Override
    public ArrayList&lt;Member&gt; getMembersInRestance() {
<span class="fc" id="L227">        ArrayList&lt;Member&gt; membersInRestance = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="fc" id="L230">            String selectSQL = &quot;SELECT * FROM members  WHERE restance != 0 &quot;</span>
                    + &quot;ORDER BY first_name&quot;;
            //get connection
<span class="nc" id="L233">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L236">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L238">                String firstName = result.getString(1);</span>
<span class="nc" id="L239">                String lastName = result.getString(2);</span>
<span class="nc" id="L240">                int age = result.getInt(3);</span>
<span class="nc" id="L241">                boolean isActive = result.getBoolean(4);</span>
<span class="nc" id="L242">                int id = result.getInt(5);</span>
<span class="nc" id="L243">                int contingent = result.getInt(6);</span>
<span class="nc" id="L244">                int restance = result.getInt(7);</span>

                //create a new Member object and insert it into the ArrayList
<span class="nc" id="L247">                membersInRestance.add(new Member(firstName, lastName, age,</span>
                        isActive, contingent, restance, id));
<span class="nc" id="L249">            }</span>
<span class="fc" id="L250">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L251">        }</span>
<span class="fc" id="L252">        return membersInRestance;</span>
    }

    @Override
    public ArrayList&lt;CompetitiveSwimmer&gt; getCompetitiveSwimmers() {
<span class="nc" id="L257">        ArrayList&lt;CompetitiveSwimmer&gt; competitiveSwimmers = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="nc" id="L260">            String selectSQL = &quot;SELECT id, first_name, last_name, age, disciplin, &quot;</span>
                    + &quot;best_time, date_of_best_time FROM members&quot;
                    + &quot;NATURAL JOIN competitive_swimmers&quot;;
            //get connection
<span class="nc" id="L264">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L267">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L269">                int id = result.getInt(1);</span>
<span class="nc" id="L270">                String firstName = result.getString(2);</span>
<span class="nc" id="L271">                String lastName = result.getString(3);</span>
<span class="nc" id="L272">                int age = result.getInt(4);</span>
<span class="nc" id="L273">                String disciplin = result.getString(5);</span>
<span class="nc" id="L274">                Time bestTime = result.getTime(6);</span>
<span class="nc" id="L275">                Timestamp dateOfBestTime = result.getTimestamp(7);</span>

                //create a new Member object and insert it into the ArrayList
//                competitiveSwimmers.add(new CompetitiveSwimmer(firstName, lastName, age, id, disciplin,
//                        bestTime, dateOfBestTime));
<span class="nc" id="L280">            }</span>
<span class="nc" id="L281">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L282">        }</span>
<span class="nc" id="L283">        return competitiveSwimmers;</span>
    }

    @Override
    public ArrayList&lt;CompetitiveSwimmer&gt; getTrainingsresult() {
<span class="nc" id="L288">        ArrayList&lt;CompetitiveSwimmer&gt; trainingresults = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="nc" id="L291">            String selectSQL = &quot;SELECT id, first_name, last_name, age, disciplin, &quot;</span>
                    + &quot;best_time, date_of_best_time FROM members&quot;
                    + &quot;NATURAL JOIN competitive_swimmers&quot;
                    + &quot;ORDER BY best_time&quot;;
            //get connection
<span class="nc" id="L296">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L299">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L301">                int id = result.getInt(1);</span>
<span class="nc" id="L302">                String firstName = result.getString(2);</span>
<span class="nc" id="L303">                String lastName = result.getString(3);</span>
<span class="nc" id="L304">                int age = result.getInt(4);</span>
<span class="nc" id="L305">                String disciplin = result.getString(5);</span>
<span class="nc" id="L306">                Time bestTime = result.getTime(6);</span>
<span class="nc" id="L307">                Timestamp dateOfBestTime = result.getTimestamp(7);</span>

//                trainingresults.add(new CompetitiveSwimmer(firstName, lastName, age, id, disciplin,
//                        bestTime, dateOfBestTime));
<span class="nc" id="L311">            }</span>
<span class="nc" id="L312">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L313">        }</span>
<span class="nc" id="L314">        return trainingresults;</span>
    }

    @Override
    public int editUnder18(int contingent) {
        try {
<span class="nc" id="L320">            String UpdateSQL = &quot;UPDATE contingent SET under_18 = ?&quot;;</span>
<span class="nc" id="L321">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L322">            preparedStatement.setInt(1, contingent);</span>
<span class="nc" id="L323">            preparedStatement.executeUpdate();</span>

<span class="nc" id="L325">        } catch (SQLException e) {</span>
<span class="nc" id="L326">        }</span>
<span class="nc" id="L327">        return contingent;</span>

    }

    @Override
    public int editBetween18And60(int contingent) {
        try {
<span class="nc" id="L334">            String UpdateSQL = &quot;UPDATE contingent SET between_18_and_60 = ?&quot;;</span>
<span class="nc" id="L335">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L336">            preparedStatement.setInt(1, contingent);</span>
<span class="nc" id="L337">            preparedStatement.executeUpdate();</span>

<span class="nc" id="L339">        } catch (SQLException e) {</span>
<span class="nc" id="L340">        }</span>
<span class="nc" id="L341">        return contingent;</span>
    }

    @Override
    public int editOver60(int contingent) {
        try {
<span class="nc" id="L347">            String UpdateSQL = &quot;UPDATE contingent SET over_60 = ?&quot;;</span>
<span class="nc" id="L348">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L349">            preparedStatement.setInt(1, contingent);</span>
<span class="nc" id="L350">            preparedStatement.executeUpdate();</span>

<span class="nc" id="L352">        } catch (SQLException e) {</span>
<span class="nc" id="L353">        }</span>
<span class="nc" id="L354">        return contingent;</span>
    }

    @Override
    public int editPassive(int contingent) {
        try {
<span class="nc" id="L360">            String UpdateSQL = &quot;UPDATE contingent SET passive = ?&quot;;</span>
<span class="nc" id="L361">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L362">            preparedStatement.setInt(1, contingent);</span>
<span class="nc" id="L363">            preparedStatement.executeUpdate();</span>

<span class="nc" id="L365">        } catch (SQLException e) {</span>
<span class="nc" id="L366">        }</span>
<span class="nc" id="L367">        return contingent;</span>
    }

    @Override
    public Member getMemberById(int id) {
<span class="fc" id="L372">        Member member = null;</span>
        try {
            //create String for the PreparedStatement
<span class="fc" id="L375">            String selectSQL = &quot;SELECT * FROM members WHERE id = &quot; + id;</span>
            //get connection
<span class="nc" id="L377">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L380">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L382">                String firstName = result.getString(1);</span>
<span class="nc" id="L383">                String lastName = result.getString(2);</span>
<span class="nc" id="L384">                int age = result.getInt(3);</span>
<span class="nc" id="L385">                boolean isActive = result.getBoolean(4);</span>
<span class="nc" id="L386">                int contingent = result.getInt(6);</span>
<span class="nc" id="L387">                int restance = result.getInt(7);</span>

                //create a new Member object and insert it into the ArrayList
<span class="nc" id="L390">                member = new Member(firstName, lastName, age, isActive, contingent, restance, id);</span>
<span class="nc" id="L391">            }</span>
<span class="fc" id="L392">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L393">        }</span>
<span class="fc" id="L394">        return member;</span>
    }

    @Override
    public void editRestance(int id, int newRestance) {
        try {
<span class="nc" id="L400">            String UpdateSQL = &quot;UPDATE members SET restance = ? WHERE id = ?&quot;;</span>
<span class="nc" id="L401">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L402">            preparedStatement.setInt(1, newRestance);</span>
<span class="nc" id="L403">            preparedStatement.setInt(2, id);</span>
<span class="nc" id="L404">            preparedStatement.executeUpdate();</span>
            
<span class="nc" id="L406">        } catch (SQLException e) {</span>
<span class="nc" id="L407">        }</span>
<span class="nc" id="L408">    }</span>

    @Override
    public void editFirstName(int id, String firstName) {
        try {
<span class="nc" id="L413">            String UpdateSQL = &quot;UPDATE members SET first_name = ? WHERE id = ?&quot;;</span>
<span class="nc" id="L414">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L415">            preparedStatement.setString(1, firstName);</span>
<span class="nc" id="L416">            preparedStatement.setInt(2, id);</span>
<span class="nc" id="L417">            preparedStatement.executeUpdate();</span>
            
<span class="nc" id="L419">        } catch (SQLException e) {</span>
<span class="nc" id="L420">        }</span>
<span class="nc" id="L421">    }</span>

    @Override
    public void editLastName(int id, String lastName) {
        try {
<span class="nc" id="L426">            String UpdateSQL = &quot;UPDATE members SET last_name = ? WHERE id = ?&quot;;</span>
<span class="nc" id="L427">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L428">            preparedStatement.setString(1, lastName);</span>
<span class="nc" id="L429">            preparedStatement.setInt(2, id);</span>
<span class="nc" id="L430">            preparedStatement.executeUpdate();</span>
            
<span class="nc" id="L432">        } catch (SQLException e) {</span>
<span class="nc" id="L433">        }</span>
<span class="nc" id="L434">    }</span>

    @Override
    public void editActiveness(int id, boolean active) {
        try {
<span class="nc" id="L439">            String UpdateSQL = &quot;UPDATE members SET is_active = ? WHERE id = ?&quot;;</span>
<span class="nc" id="L440">            PreparedStatement preparedStatement = connection.prepareStatement(UpdateSQL);</span>
<span class="nc" id="L441">            preparedStatement.setBoolean(1, active);</span>
<span class="nc" id="L442">            preparedStatement.setInt(2, id);</span>
<span class="nc" id="L443">            preparedStatement.executeUpdate();</span>
            
<span class="nc" id="L445">        } catch (SQLException e) {</span>
<span class="nc" id="L446">        }</span>
<span class="nc" id="L447">    }</span>
    
    @Override
    public ArrayList&lt;CompetitiveSwimmer&gt; getCompetitionSwimmers() {
<span class="nc" id="L451">        ArrayList&lt;CompetitiveSwimmer&gt; competitionSwimmers = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="nc" id="L454">            String selectSQL = &quot;SELECT id, first_name, last_name, age, disciplin,&quot;</span>
                    + &quot;best_time, date_of_best_time, competition_name, ranking, &quot;
                    + &quot;best_time FROM members NATURAL JOIN competitive_swimmers&quot;
                    + &quot;NATURAL JOIN competitions ORDER BY id&quot;;
            //get connection
<span class="nc" id="L459">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L462">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L463" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L464">                int id = result.getInt(1);</span>
<span class="nc" id="L465">                String firstName = result.getString(2);</span>
<span class="nc" id="L466">                String lastName = result.getString(3);</span>
<span class="nc" id="L467">                int age = result.getInt(4);</span>
<span class="nc" id="L468">                String disciplin = result.getString(5);</span>
<span class="nc" id="L469">                Time bestTime = result.getTime(6);</span>
<span class="nc" id="L470">                Timestamp dateOfBestTime = result.getTimestamp(7);</span>
<span class="nc" id="L471">                String competitionName = result.getString(8);</span>
<span class="nc" id="L472">                int ranking = result.getInt(9);</span>
<span class="nc" id="L473">                Time bestTimeInCompetition = result.getTime(10);</span>

                //create a new Member object and insert it into the ArrayList
//                Competition competition = new Competition(competitionName, ranking, bestTimeInCompetition);
//                competitionSwimmers.add(new CompetitiveSwimmer(disciplin, bestTime, dateOfBestTime, competition, firstName, lastName, age, id));
<span class="nc" id="L478">            }</span>
<span class="nc" id="L479">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L480">        }</span>
<span class="nc" id="L481">        return competitionSwimmers;</span>
    }

    @Override
    public ArrayList&lt;CompetitiveSwimmer&gt; getCompetitionResult() {
<span class="nc" id="L486">        ArrayList&lt;CompetitiveSwimmer&gt; competitionResults = new ArrayList&lt;&gt;();</span>
        try {
            //create String for the PreparedStatement
<span class="nc" id="L489">            String selectSQL = &quot;SELECT best_time, ranking, competition_name, id,&quot;</span>
                    + &quot; first_name, last_name, age, disciplin, best_time, &quot;
                    + &quot;date_of_best_time FROM members NATURAL JOIN &quot;
                    + &quot;competitive_swimmers NATURAL JOIN competitions &quot;
                    + &quot;ORDER BY best_time&quot;;
            //get connection
<span class="nc" id="L495">            PreparedStatement preparedStatement = connection.prepareStatement(selectSQL);</span>

            //execute the SQL query
<span class="nc" id="L498">            ResultSet result = preparedStatement.executeQuery(selectSQL);</span>
<span class="nc bnc" id="L499" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L500">                Time bestTimeInCompetition = result.getTime(1);</span>
<span class="nc" id="L501">                int ranking = result.getInt(2);</span>
<span class="nc" id="L502">                String competitionName = result.getString(3);</span>
<span class="nc" id="L503">                int id = result.getInt(4);</span>
<span class="nc" id="L504">                String firstName = result.getString(5);</span>
<span class="nc" id="L505">                String lastName = result.getString(6);</span>
<span class="nc" id="L506">                int age = result.getInt(7);</span>
<span class="nc" id="L507">                String disciplin = result.getString(8);</span>
<span class="nc" id="L508">                Time bestTime = result.getTime(9);</span>
<span class="nc" id="L509">                Timestamp dateOfBestTime = result.getTimestamp(10);</span>
                

                //create a new Member object and insert it into the ArrayList
//                Competition competition = new Competition(competitionName, ranking, bestTimeInCompetition);
//                competitionResults.add(new CompetitiveSwimmer(disciplin, bestTime, dateOfBestTime, competition, firstName, lastName, age, id));
<span class="nc" id="L515">            }</span>
<span class="nc" id="L516">        } catch (SQLException | NullPointerException e) {</span>
<span class="nc" id="L517">        }</span>
<span class="nc" id="L518">        return competitionResults;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>